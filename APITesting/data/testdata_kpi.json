[
  {
    "description": "Valid KPI API response check",
    "endpoint": "/dashboard/{email}/thinxfresh/kpi",
    "expected_status": 200,
    "auth_type": "valid",
    "validate_schema": true,
    "required_keys": [
      "total_trip_starting",
      "total_trip_ending",
      "total_trip_idle",
      "total_trip_moving",
      "trip_health",
      "totalSensors"
    ],
    "required_subkeys": [
      "lowAlertTrips",
      "moderateAlertTrips",
      "highAlertTrips"
    ],
    "logical_check": "non_negative_metrics",
    "check_performance": true,
    "max_duration": 2
  },
  {
    "description": "Invalid token - expect 401/403",
    "endpoint": "/dashboard/{email}/thinxfresh/kpi",
    "expected_status_list": [401, 403],
    "auth_type": "invalid"
  },
  {
    "description": "Missing token - expect 401/403",
    "endpoint": "/dashboard/{email}/thinxfresh/kpi",
    "expected_status_list": [401, 403],
    "auth_type": "none"
  },
  {
    "description": "Trip health counts should not exceed total trips",
    "endpoint": "/dashboard/{email}/thinxfresh/kpi",
    "expected_status": 200,
    "auth_type": "valid",
    "logical_check": "trip_health_consistency"
  },
  {
    "description": "Ensure all KPI metrics are non-negative",
    "endpoint": "/dashboard/{email}/thinxfresh/kpi",
    "expected_status": 200,
    "auth_type": "valid",
    "logical_check": "non_negative_metrics"
  },


{
  "description": "Validate total alert count matches sum of sub-alerts",
  "endpoint": "/dashboard/{email}/thinxfresh/kpi",
  "expected_status": 200,
  "auth_type": "valid",
  "logical_check": "alert_consistency"
},
{
  "description": "Validate failed shadow devices field exists and is a list",
  "endpoint": "/dashboard/{email}/thinxfresh/kpi",
  "expected_status": 200,
  "auth_type": "valid",
  "logical_check": "failed_shadow_devices_list"
},
{
  "description": "Validate trip_in_alert_count + trip_not_alert_count equals total trips",
  "endpoint": "/dashboard/{email}/thinxfresh/kpi",
  "expected_status": 200,
  "auth_type": "valid",
  "logical_check": "trip_alert_balance"
},
{
  "description": "Check API handles invalid endpoint gracefully",
  "endpoint": "/dashboard/{email}/thinxfresh/kpi_invalid",
  "expected_status_list": [400, 404],
  "auth_type": "valid"
},
{
  "description": "Check API rejects malformed Authorization header",
  "endpoint": "/dashboard/{email}/thinxfresh/kpi",
  "expected_status_list": [401, 403],
  "auth_type": "custom_invalid_header"
},
{
  "description": "Validate API handles high load response within threshold",
  "endpoint": "/dashboard/{email}/thinxfresh/kpi",
  "expected_status": 200,
  "auth_type": "valid",
  "check_performance": true,
  "max_duration": 4
},
{
  "description": "Validate total sensors >= total assigned sensors",
  "endpoint": "/dashboard/{email}/thinxfresh/kpi",
  "expected_status": 200,
  "auth_type": "valid",
  "logical_check": "sensor_allocation"
},
{
  "description": "Verify no negative alert counts in API response",
  "endpoint": "/dashboard/{email}/thinxfresh/kpi",
  "expected_status": 200,
  "auth_type": "valid",
  "logical_check": "no_negative_alerts"
},
{
  "description": "Check that battery and charging metrics exist",
  "endpoint": "/dashboard/{email}/thinxfresh/kpi",
  "expected_status": 200,
  "auth_type": "valid",
  "required_keys": ["batteryLowData", "charging_count", "charge_full"]
},
{
  "description": "Verify KPI API returns valid JSON even with no data",
  "endpoint": "/dashboard/{email}/thinxfresh/kpi",
  "expected_status": 200,
  "auth_type": "valid",
  "logical_check": "valid_json_structure"
}
]
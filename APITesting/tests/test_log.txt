============================= test session starts =============================
platform win32 -- Python 3.13.9, pytest-9.0.1, pluggy-1.6.0 -- C:\Users\AravindMaddineni\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\python.exe
cachedir: .pytest_cache
metadata: {'Python': '3.13.9', 'Platform': 'Windows-11-10.0.26200-SP0', 'Packages': {'pytest': '9.0.1', 'pluggy': '1.6.0'}, 'Plugins': {'html': '4.1.1', 'metadata': '3.1.1'}}
rootdir: C:\Users\AravindMaddineni\Downloads\Apitest2 1\APITesting\APITesting
configfile: pytest.ini
plugins: html-4.1.1, metadata-3.1.1
collecting ... collected 6 items

test_update_password_ddt.py::test_update_password_ddt[valid_update_password] Logging in to https://authentication.thinxview.com/api/auth/login/...
FAILED
test_update_password_ddt.py::test_update_password_ddt[password_mismatch] PASSED
test_update_password_ddt.py::test_update_password_ddt[missing_new_password] PASSED
test_update_password_ddt.py::test_update_password_ddt[missing_confirm_password] PASSED
test_update_password_ddt.py::test_update_password_ddt[empty_payload] PASSED
test_update_password_ddt.py::test_update_password_ddt[no_auth_header] PASSED

================================== FAILURES ===================================
_______________ test_update_password_ddt[valid_update_password] _______________

case = {'expected_status': 200, 'name': 'valid_update_password', 'payload': {'confirmPassword': 'Aravind@1234', 'newPassword': 'Aravind@1234'}}
auth_token = '{"access": "lgiyGw0ZYKQeMO3OxNmX84xD8lJhrfjeo/knZzEfU2bZNqFog607p23npqqNBVvDohkYGFWL59Pzdva9dH0QfFjT7vWA6e8sef/+7IhAG...zm2wOA16Q/sraN2LXBHduCZHbgfO+cvDkDV3k+uRJoJvlFACw9CFMLngkuqr3IC4vgrlWnk7zgpzFQrFb6+Eb5xwNe04dvIMVXjDL0PWLjdRQ1z20A=="}'

    @pytest.mark.parametrize("case", DDT_CASES, ids=[c["name"] for c in DDT_CASES])
    def test_update_password_ddt(case, auth_token):
    
        payload = case.get("payload")
        include_auth = case.get("include_auth", True)
        expected_status = case["expected_status"]
    
        headers = {"Content-Type": "application/json"}
    
        if include_auth:
            # Use auth_token fixture
            headers["Authorization"] = f"Bearer {auth_token}"
            response = requests.put(
                UPDATE_PASSWORD_URL,
                headers=headers,
                json=payload,
                verify=False,
                timeout=20,
            )
        else:
            response = requests.put(
                UPDATE_PASSWORD_URL,
                headers=headers,
                json=payload,
                verify=False,
                timeout=20,
            )
    
>       assert response.status_code == expected_status, (
            f"[{case['name']}] Expected {expected_status}, "
            f"got {response.status_code}. Response: {response.text}"
        )
E       AssertionError: [valid_update_password] Expected 200, got 400. Response: {"message":"New password cannot be the same as old password"}
E       assert 400 == 200
E        +  where 400 = <Response [400]>.status_code

test_update_password_ddt.py:49: AssertionError
=========================== short test summary info ===========================
FAILED test_update_password_ddt.py::test_update_password_ddt[valid_update_password]
========================= 1 failed, 5 passed in 1.65s =========================

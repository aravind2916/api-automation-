============================= test session starts =============================
platform win32 -- Python 3.13.9, pytest-9.0.1, pluggy-1.6.0 -- C:\Users\AravindMaddineni\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\python.exe
cachedir: .pytest_cache
metadata: {'Python': '3.13.9', 'Platform': 'Windows-11-10.0.26200-SP0', 'Packages': {'pytest': '9.0.1', 'pluggy': '1.6.0'}, 'Plugins': {'html': '4.1.1', 'metadata': '3.1.1'}}
rootdir: C:\Users\AravindMaddineni\Downloads\Apitest2 1\APITesting\APITesting
configfile: pytest.ini
plugins: html-4.1.1, metadata-3.1.1
collecting ... collected 34 items

tests/test_update_datetime_format_ddt.py::test_update_datetime_format_valid_cases[MM/DD/YYYY + USER_LOCAL + Asia/Kolkata] DEBUG: Trying default password 'Aravind@123'...
DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"MM/DD/YYYY","time_display_mode":"USER_LOCAL","time_zone":"Asia/Kolkata"}}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_valid_cases[MM/DD/YYYY + GMT + UTC] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"MM/DD/YYYY","time_display_mode":"GMT","time_zone":"UTC"}}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_valid_cases[MM/DD/YYYY + EVENT_LOCAL + EVENT_LOCAL] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"MM/DD/YYYY","time_display_mode":"EVENT_LOCAL","time_zone":"EVENT_LOCAL"}}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_valid_cases[DD/MM/YYYY + USER_LOCAL + Asia/Kolkata] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"DD/MM/YYYY","time_display_mode":"USER_LOCAL","time_zone":"Asia/Kolkata"}}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_valid_cases[YYYY/MM/DD + GMT + UTC] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"YYYY/MM/DD","time_display_mode":"GMT","time_zone":"UTC"}}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_valid_cases[DD/MM/YYYY + GMT + Europe/London] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"DD/MM/YYYY","time_display_mode":"GMT","time_zone":"EuropeLondon"}}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_valid_cases[YYYY/MM/DD + USER_LOCAL + America/New_York] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"YYYY/MM/DD","time_display_mode":"USER_LOCAL","time_zone":"AmericaNew_York"}}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_valid_cases[MM/DD/YYYY + EVENT_LOCAL + Australia/Sydney] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"MM/DD/YYYY","time_display_mode":"EVENT_LOCAL","time_zone":"AustraliaSydney"}}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_valid_cases[DD/MM/YYYY + EVENT_LOCAL + Asia/Tokyo] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"DD/MM/YYYY","time_display_mode":"EVENT_LOCAL","time_zone":"AsiaTokyo"}}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_valid_cases[YYYY/MM/DD + EVENT_LOCAL + Europe/Paris] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"YYYY/MM/DD","time_display_mode":"EVENT_LOCAL","time_zone":"EuropeParis"}}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_valid_cases[MM/DD/YYYY + USER_LOCAL + UTC] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"MM/DD/YYYY","time_display_mode":"USER_LOCAL","time_zone":"UTC"}}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_valid_cases[DD/MM/YYYY + GMT + Asia/Kolkata] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"DD/MM/YYYY","time_display_mode":"GMT","time_zone":"Asia/Kolkata"}}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_valid_cases[YYYY/MM/DD + USER_LOCAL + Pacific/Honolulu] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"YYYY/MM/DD","time_display_mode":"USER_LOCAL","time_zone":"PacificHonolulu"}}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_valid_cases[DD/MM/YYYY + EVENT_LOCAL + America/Los_Angeles] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"DD/MM/YYYY","time_display_mode":"EVENT_LOCAL","time_zone":"AmericaLos_Angeles"}}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_valid_cases[MM/DD/YYYY + GMT + Africa/Cairo] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"MM/DD/YYYY","time_display_mode":"GMT","time_zone":"AfricaCairo"}}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Invalid date format - Dashes] DEBUG: Status: 400, Body: {"message":"Invalid dateFormat. Allowed: MM/DD/YYYY, DD/MM/YYYY, YYYY/MM/DD","received":"DD-YY-MM","normalized":"DD/YY/MM"}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Invalid date format - Special Chars] DEBUG: Status: 400, Body: {"message":"Invalid dateFormat. Allowed: MM/DD/YYYY, DD/MM/YYYY, YYYY/MM/DD","received":"MM@DDYYYY","normalized":"MM@DDYYYY"}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Invalid date format - Empty] DEBUG: Status: 400, Body: {"message":"Invalid dateFormat. Allowed: MM/DD/YYYY, DD/MM/YYYY, YYYY/MM/DD","received":"","normalized":""}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Invalid date format - Long String] DEBUG: Status: 400, Body: {"message":"Invalid dateFormat. Allowed: MM/DD/YYYY, DD/MM/YYYY, YYYY/MM/DD","received":"MMDDYYYYYYYYYYYYYYYY","normalized":"MMDDYYYYYYYYYYYYYYYY"}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Invalid time format - Random] DEBUG: Status: 400, Body: {"message":"Invalid timeFormat. Allowed: USER_LOCAL, GMT, EVENT_LOCAL","received":"LOCAL","normalized":"LOCAL"}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Invalid time format - Lowercase] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"MM/DD/YYYY","time_display_mode":"USER_LOCAL","time_zone":"Asia/Kolkata"}}
FAILED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Invalid time format - Empty] DEBUG: Status: 400, Body: {"message":"Invalid timeFormat. Allowed: USER_LOCAL, GMT, EVENT_LOCAL","received":"","normalized":""}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Invalid TimeZone - Unknown ID] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"MM/DD/YYYY","time_display_mode":"GMT","time_zone":"MarsPhobos"}}
FAILED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Invalid TimeZone - Numeric] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"MM/DD/YYYY","time_display_mode":"GMT","time_zone":"12345"}}
FAILED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Invalid TimeZone - Empty] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"MM/DD/YYYY","time_display_mode":"GMT","time_zone":"Asia/Kolkata"}}
FAILED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Missing dateFormat] DEBUG: Status: 400, Body: {"message":"Invalid dateFormat. Allowed: MM/DD/YYYY, DD/MM/YYYY, YYYY/MM/DD","received":"","normalized":""}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Missing timeFormat] DEBUG: Status: 400, Body: {"message":"Invalid timeFormat. Allowed: USER_LOCAL, GMT, EVENT_LOCAL","received":"","normalized":""}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Missing timeZone] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"MM/DD/YYYY","time_display_mode":"USER_LOCAL","time_zone":"Asia/Kolkata"}}
FAILED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Empty Payload] DEBUG: Status: 400, Body: {"message":"Invalid dateFormat. Allowed: MM/DD/YYYY, DD/MM/YYYY, YYYY/MM/DD","received":"","normalized":""}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Extra Fields] DEBUG: Status: 200, Body: {"message":"Date & time format updated successfully","data":{"email":"aravind.m@gndsolutions.in","date_display_format":"MM/DD/YYYY","time_display_mode":"USER_LOCAL","time_zone":"Asia/Kolkata"}}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[SQL Injection Probe Date] DEBUG: Status: 400, Body: {"message":"Invalid dateFormat. Allowed: MM/DD/YYYY, DD/MM/YYYY, YYYY/MM/DD","received":" OR 11 --","normalized":"OR 11 //"}
PASSED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Invalid user identifier] DEBUG: Status: 403, Body: {"message":"You can change only your own date/time settings"}
FAILED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Unauthorized role] DEBUG: Status: 401, Body: {"msg":"refresh token expired , please login - Unexpected token i in JSON at position 1"}
FAILED
tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[User not found] DEBUG: Status: 403, Body: {"message":"You can change only your own date/time settings"}
FAILED

================================== FAILURES ===================================
_ test_update_datetime_format_invalid_cases[Invalid time format - Lowercase] __

case = {'expected_message': 'Invalid timeFormat', 'expected_status': 400, 'payload': {'dateFormat': 'MM/DD/YYYY', 'timeFormat': 'user_local', 'timeZone': 'Asia/Kolkata'}, 'title': 'Invalid time format - Lowercase'}
auth_token = '{"access": "rQ34it7GiIj9brJmkMPkJwNotFZTB1aiT6Ldk9Vbw/VcMqKOCG8LPd6kjt7569rGJGXbOVIyNt6EURHq0y8Msxp4sMOhlnzqlq4/y4PPb...GtzAfH3UR1+E66O3tquRI41eWnD99GndbgGiL4Zqwvmiy12Nrbas5DZDaiVE5S78oIatMSZaywDfQCTwliTfuRe4pXXb17bO18Fb+krNaYJRAPPfkjbN"}'

    @pytest.mark.parametrize("case", TEST_DATA["invalid_cases"], ids=[c["title"] for c in TEST_DATA["invalid_cases"]])
    def test_update_datetime_format_invalid_cases(case, auth_token):
        # Default valid setup
        target_endpoint = ENDPOINT
        headers = {
            "Content-Type": "application/json",
            "Authorization": f"Bearer {auth_token}"
        }
    
        # Custom logic for specific failure scenarios
        if case["title"] == "User not found":
            fake_email = "unknown.user.999@test.com"
            target_endpoint = f"{BASE_URL}/api/profile/{fake_email}/thinxfresh/update-date-time-format"
    
        if case["title"] == "Invalid user identifier":
            # Simulate invalid format in URL
            bad_email = "invalid-email-format-xyz"
            target_endpoint = f"{BASE_URL}/api/profile/{bad_email}/thinxfresh/update-date-time-format"
    
        if case["title"] == "Unauthorized role":
            headers["Authorization"] = "Bearer invalid_token_simulating_unauthorized"
    
        response = requests.put(
            target_endpoint,
            headers=headers,
            json=case["payload"],
            verify=False
        )
    
        print(f"DEBUG: Status: {response.status_code}, Body: {response.text}")
>       assert response.status_code == case["expected_status"]
E       assert 200 == 400
E        +  where 200 = <Response [200]>.status_code

tests\test_update_datetime_format_ddt.py:71: AssertionError
__ test_update_datetime_format_invalid_cases[Invalid TimeZone - Unknown ID] ___

case = {'expected_message': '', 'expected_status': 400, 'payload': {'dateFormat': 'MM/DD/YYYY', 'timeFormat': 'GMT', 'timeZone': 'Mars/Phobos'}, 'title': 'Invalid TimeZone - Unknown ID'}
auth_token = '{"access": "rQ34it7GiIj9brJmkMPkJwNotFZTB1aiT6Ldk9Vbw/VcMqKOCG8LPd6kjt7569rGJGXbOVIyNt6EURHq0y8Msxp4sMOhlnzqlq4/y4PPb...GtzAfH3UR1+E66O3tquRI41eWnD99GndbgGiL4Zqwvmiy12Nrbas5DZDaiVE5S78oIatMSZaywDfQCTwliTfuRe4pXXb17bO18Fb+krNaYJRAPPfkjbN"}'

    @pytest.mark.parametrize("case", TEST_DATA["invalid_cases"], ids=[c["title"] for c in TEST_DATA["invalid_cases"]])
    def test_update_datetime_format_invalid_cases(case, auth_token):
        # Default valid setup
        target_endpoint = ENDPOINT
        headers = {
            "Content-Type": "application/json",
            "Authorization": f"Bearer {auth_token}"
        }
    
        # Custom logic for specific failure scenarios
        if case["title"] == "User not found":
            fake_email = "unknown.user.999@test.com"
            target_endpoint = f"{BASE_URL}/api/profile/{fake_email}/thinxfresh/update-date-time-format"
    
        if case["title"] == "Invalid user identifier":
            # Simulate invalid format in URL
            bad_email = "invalid-email-format-xyz"
            target_endpoint = f"{BASE_URL}/api/profile/{bad_email}/thinxfresh/update-date-time-format"
    
        if case["title"] == "Unauthorized role":
            headers["Authorization"] = "Bearer invalid_token_simulating_unauthorized"
    
        response = requests.put(
            target_endpoint,
            headers=headers,
            json=case["payload"],
            verify=False
        )
    
        print(f"DEBUG: Status: {response.status_code}, Body: {response.text}")
>       assert response.status_code == case["expected_status"]
E       assert 200 == 400
E        +  where 200 = <Response [200]>.status_code

tests\test_update_datetime_format_ddt.py:71: AssertionError
____ test_update_datetime_format_invalid_cases[Invalid TimeZone - Numeric] ____

case = {'expected_message': '', 'expected_status': 400, 'payload': {'dateFormat': 'MM/DD/YYYY', 'timeFormat': 'GMT', 'timeZone': '12345'}, 'title': 'Invalid TimeZone - Numeric'}
auth_token = '{"access": "rQ34it7GiIj9brJmkMPkJwNotFZTB1aiT6Ldk9Vbw/VcMqKOCG8LPd6kjt7569rGJGXbOVIyNt6EURHq0y8Msxp4sMOhlnzqlq4/y4PPb...GtzAfH3UR1+E66O3tquRI41eWnD99GndbgGiL4Zqwvmiy12Nrbas5DZDaiVE5S78oIatMSZaywDfQCTwliTfuRe4pXXb17bO18Fb+krNaYJRAPPfkjbN"}'

    @pytest.mark.parametrize("case", TEST_DATA["invalid_cases"], ids=[c["title"] for c in TEST_DATA["invalid_cases"]])
    def test_update_datetime_format_invalid_cases(case, auth_token):
        # Default valid setup
        target_endpoint = ENDPOINT
        headers = {
            "Content-Type": "application/json",
            "Authorization": f"Bearer {auth_token}"
        }
    
        # Custom logic for specific failure scenarios
        if case["title"] == "User not found":
            fake_email = "unknown.user.999@test.com"
            target_endpoint = f"{BASE_URL}/api/profile/{fake_email}/thinxfresh/update-date-time-format"
    
        if case["title"] == "Invalid user identifier":
            # Simulate invalid format in URL
            bad_email = "invalid-email-format-xyz"
            target_endpoint = f"{BASE_URL}/api/profile/{bad_email}/thinxfresh/update-date-time-format"
    
        if case["title"] == "Unauthorized role":
            headers["Authorization"] = "Bearer invalid_token_simulating_unauthorized"
    
        response = requests.put(
            target_endpoint,
            headers=headers,
            json=case["payload"],
            verify=False
        )
    
        print(f"DEBUG: Status: {response.status_code}, Body: {response.text}")
>       assert response.status_code == case["expected_status"]
E       assert 200 == 400
E        +  where 200 = <Response [200]>.status_code

tests\test_update_datetime_format_ddt.py:71: AssertionError
_____ test_update_datetime_format_invalid_cases[Invalid TimeZone - Empty] _____

case = {'expected_message': '', 'expected_status': 400, 'payload': {'dateFormat': 'MM/DD/YYYY', 'timeFormat': 'GMT', 'timeZone': ''}, 'title': 'Invalid TimeZone - Empty'}
auth_token = '{"access": "rQ34it7GiIj9brJmkMPkJwNotFZTB1aiT6Ldk9Vbw/VcMqKOCG8LPd6kjt7569rGJGXbOVIyNt6EURHq0y8Msxp4sMOhlnzqlq4/y4PPb...GtzAfH3UR1+E66O3tquRI41eWnD99GndbgGiL4Zqwvmiy12Nrbas5DZDaiVE5S78oIatMSZaywDfQCTwliTfuRe4pXXb17bO18Fb+krNaYJRAPPfkjbN"}'

    @pytest.mark.parametrize("case", TEST_DATA["invalid_cases"], ids=[c["title"] for c in TEST_DATA["invalid_cases"]])
    def test_update_datetime_format_invalid_cases(case, auth_token):
        # Default valid setup
        target_endpoint = ENDPOINT
        headers = {
            "Content-Type": "application/json",
            "Authorization": f"Bearer {auth_token}"
        }
    
        # Custom logic for specific failure scenarios
        if case["title"] == "User not found":
            fake_email = "unknown.user.999@test.com"
            target_endpoint = f"{BASE_URL}/api/profile/{fake_email}/thinxfresh/update-date-time-format"
    
        if case["title"] == "Invalid user identifier":
            # Simulate invalid format in URL
            bad_email = "invalid-email-format-xyz"
            target_endpoint = f"{BASE_URL}/api/profile/{bad_email}/thinxfresh/update-date-time-format"
    
        if case["title"] == "Unauthorized role":
            headers["Authorization"] = "Bearer invalid_token_simulating_unauthorized"
    
        response = requests.put(
            target_endpoint,
            headers=headers,
            json=case["payload"],
            verify=False
        )
    
        print(f"DEBUG: Status: {response.status_code}, Body: {response.text}")
>       assert response.status_code == case["expected_status"]
E       assert 200 == 400
E        +  where 200 = <Response [200]>.status_code

tests\test_update_datetime_format_ddt.py:71: AssertionError
_________ test_update_datetime_format_invalid_cases[Missing timeZone] _________

case = {'expected_message': '', 'expected_status': 400, 'payload': {'dateFormat': 'MM/DD/YYYY', 'timeFormat': 'USER_LOCAL'}, 'title': 'Missing timeZone'}
auth_token = '{"access": "rQ34it7GiIj9brJmkMPkJwNotFZTB1aiT6Ldk9Vbw/VcMqKOCG8LPd6kjt7569rGJGXbOVIyNt6EURHq0y8Msxp4sMOhlnzqlq4/y4PPb...GtzAfH3UR1+E66O3tquRI41eWnD99GndbgGiL4Zqwvmiy12Nrbas5DZDaiVE5S78oIatMSZaywDfQCTwliTfuRe4pXXb17bO18Fb+krNaYJRAPPfkjbN"}'

    @pytest.mark.parametrize("case", TEST_DATA["invalid_cases"], ids=[c["title"] for c in TEST_DATA["invalid_cases"]])
    def test_update_datetime_format_invalid_cases(case, auth_token):
        # Default valid setup
        target_endpoint = ENDPOINT
        headers = {
            "Content-Type": "application/json",
            "Authorization": f"Bearer {auth_token}"
        }
    
        # Custom logic for specific failure scenarios
        if case["title"] == "User not found":
            fake_email = "unknown.user.999@test.com"
            target_endpoint = f"{BASE_URL}/api/profile/{fake_email}/thinxfresh/update-date-time-format"
    
        if case["title"] == "Invalid user identifier":
            # Simulate invalid format in URL
            bad_email = "invalid-email-format-xyz"
            target_endpoint = f"{BASE_URL}/api/profile/{bad_email}/thinxfresh/update-date-time-format"
    
        if case["title"] == "Unauthorized role":
            headers["Authorization"] = "Bearer invalid_token_simulating_unauthorized"
    
        response = requests.put(
            target_endpoint,
            headers=headers,
            json=case["payload"],
            verify=False
        )
    
        print(f"DEBUG: Status: {response.status_code}, Body: {response.text}")
>       assert response.status_code == case["expected_status"]
E       assert 200 == 400
E        +  where 200 = <Response [200]>.status_code

tests\test_update_datetime_format_ddt.py:71: AssertionError
_____ test_update_datetime_format_invalid_cases[Invalid user identifier] ______

case = {'expected_message': 'Invalid user identifier', 'expected_status': 403, 'payload': {'dateFormat': 'MM/DD/YYYY', 'timeFormat': 'GMT', 'timeZone': 'UTC'}, 'title': 'Invalid user identifier'}
auth_token = '{"access": "rQ34it7GiIj9brJmkMPkJwNotFZTB1aiT6Ldk9Vbw/VcMqKOCG8LPd6kjt7569rGJGXbOVIyNt6EURHq0y8Msxp4sMOhlnzqlq4/y4PPb...GtzAfH3UR1+E66O3tquRI41eWnD99GndbgGiL4Zqwvmiy12Nrbas5DZDaiVE5S78oIatMSZaywDfQCTwliTfuRe4pXXb17bO18Fb+krNaYJRAPPfkjbN"}'

    @pytest.mark.parametrize("case", TEST_DATA["invalid_cases"], ids=[c["title"] for c in TEST_DATA["invalid_cases"]])
    def test_update_datetime_format_invalid_cases(case, auth_token):
        # Default valid setup
        target_endpoint = ENDPOINT
        headers = {
            "Content-Type": "application/json",
            "Authorization": f"Bearer {auth_token}"
        }
    
        # Custom logic for specific failure scenarios
        if case["title"] == "User not found":
            fake_email = "unknown.user.999@test.com"
            target_endpoint = f"{BASE_URL}/api/profile/{fake_email}/thinxfresh/update-date-time-format"
    
        if case["title"] == "Invalid user identifier":
            # Simulate invalid format in URL
            bad_email = "invalid-email-format-xyz"
            target_endpoint = f"{BASE_URL}/api/profile/{bad_email}/thinxfresh/update-date-time-format"
    
        if case["title"] == "Unauthorized role":
            headers["Authorization"] = "Bearer invalid_token_simulating_unauthorized"
    
        response = requests.put(
            target_endpoint,
            headers=headers,
            json=case["payload"],
            verify=False
        )
    
        print(f"DEBUG: Status: {response.status_code}, Body: {response.text}")
        assert response.status_code == case["expected_status"]
    
        response_json = response.json()
        # Flexible strictness on message matching
>       assert case["expected_message"] in response_json.get("message", "")
E       AssertionError: assert 'Invalid user identifier' in 'You can change only your own date/time settings'
E        +  where 'You can change only your own date/time settings' = <built-in method get of dict object at 0x000002F837C8E980>('message', '')
E        +    where <built-in method get of dict object at 0x000002F837C8E980> = {'message': 'You can change only your own date/time settings'}.get

tests\test_update_datetime_format_ddt.py:75: AssertionError
________ test_update_datetime_format_invalid_cases[Unauthorized role] _________

case = {'expected_message': 'Only ADMIN users can change date/time settings', 'expected_status': 403, 'payload': {'dateFormat': 'DD/MM/YYYY', 'timeFormat': 'USER_LOCAL', 'timeZone': 'Asia/Kolkata'}, 'title': 'Unauthorized role'}
auth_token = '{"access": "rQ34it7GiIj9brJmkMPkJwNotFZTB1aiT6Ldk9Vbw/VcMqKOCG8LPd6kjt7569rGJGXbOVIyNt6EURHq0y8Msxp4sMOhlnzqlq4/y4PPb...GtzAfH3UR1+E66O3tquRI41eWnD99GndbgGiL4Zqwvmiy12Nrbas5DZDaiVE5S78oIatMSZaywDfQCTwliTfuRe4pXXb17bO18Fb+krNaYJRAPPfkjbN"}'

    @pytest.mark.parametrize("case", TEST_DATA["invalid_cases"], ids=[c["title"] for c in TEST_DATA["invalid_cases"]])
    def test_update_datetime_format_invalid_cases(case, auth_token):
        # Default valid setup
        target_endpoint = ENDPOINT
        headers = {
            "Content-Type": "application/json",
            "Authorization": f"Bearer {auth_token}"
        }
    
        # Custom logic for specific failure scenarios
        if case["title"] == "User not found":
            fake_email = "unknown.user.999@test.com"
            target_endpoint = f"{BASE_URL}/api/profile/{fake_email}/thinxfresh/update-date-time-format"
    
        if case["title"] == "Invalid user identifier":
            # Simulate invalid format in URL
            bad_email = "invalid-email-format-xyz"
            target_endpoint = f"{BASE_URL}/api/profile/{bad_email}/thinxfresh/update-date-time-format"
    
        if case["title"] == "Unauthorized role":
            headers["Authorization"] = "Bearer invalid_token_simulating_unauthorized"
    
        response = requests.put(
            target_endpoint,
            headers=headers,
            json=case["payload"],
            verify=False
        )
    
        print(f"DEBUG: Status: {response.status_code}, Body: {response.text}")
>       assert response.status_code == case["expected_status"]
E       assert 401 == 403
E        +  where 401 = <Response [401]>.status_code

tests\test_update_datetime_format_ddt.py:71: AssertionError
__________ test_update_datetime_format_invalid_cases[User not found] __________

case = {'expected_message': 'User not found', 'expected_status': 400, 'payload': {'dateFormat': 'YYYY/MM/DD', 'timeFormat': 'GMT', 'timeZone': 'UTC'}, 'title': 'User not found'}
auth_token = '{"access": "rQ34it7GiIj9brJmkMPkJwNotFZTB1aiT6Ldk9Vbw/VcMqKOCG8LPd6kjt7569rGJGXbOVIyNt6EURHq0y8Msxp4sMOhlnzqlq4/y4PPb...GtzAfH3UR1+E66O3tquRI41eWnD99GndbgGiL4Zqwvmiy12Nrbas5DZDaiVE5S78oIatMSZaywDfQCTwliTfuRe4pXXb17bO18Fb+krNaYJRAPPfkjbN"}'

    @pytest.mark.parametrize("case", TEST_DATA["invalid_cases"], ids=[c["title"] for c in TEST_DATA["invalid_cases"]])
    def test_update_datetime_format_invalid_cases(case, auth_token):
        # Default valid setup
        target_endpoint = ENDPOINT
        headers = {
            "Content-Type": "application/json",
            "Authorization": f"Bearer {auth_token}"
        }
    
        # Custom logic for specific failure scenarios
        if case["title"] == "User not found":
            fake_email = "unknown.user.999@test.com"
            target_endpoint = f"{BASE_URL}/api/profile/{fake_email}/thinxfresh/update-date-time-format"
    
        if case["title"] == "Invalid user identifier":
            # Simulate invalid format in URL
            bad_email = "invalid-email-format-xyz"
            target_endpoint = f"{BASE_URL}/api/profile/{bad_email}/thinxfresh/update-date-time-format"
    
        if case["title"] == "Unauthorized role":
            headers["Authorization"] = "Bearer invalid_token_simulating_unauthorized"
    
        response = requests.put(
            target_endpoint,
            headers=headers,
            json=case["payload"],
            verify=False
        )
    
        print(f"DEBUG: Status: {response.status_code}, Body: {response.text}")
>       assert response.status_code == case["expected_status"]
E       assert 403 == 400
E        +  where 403 = <Response [403]>.status_code

tests\test_update_datetime_format_ddt.py:71: AssertionError
=========================== short test summary info ===========================
FAILED tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Invalid time format - Lowercase] - assert 200 == 400
 +  where 200 = <Response [200]>.status_code
FAILED tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Invalid TimeZone - Unknown ID] - assert 200 == 400
 +  where 200 = <Response [200]>.status_code
FAILED tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Invalid TimeZone - Numeric] - assert 200 == 400
 +  where 200 = <Response [200]>.status_code
FAILED tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Invalid TimeZone - Empty] - assert 200 == 400
 +  where 200 = <Response [200]>.status_code
FAILED tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Missing timeZone] - assert 200 == 400
 +  where 200 = <Response [200]>.status_code
FAILED tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Invalid user identifier] - AssertionError: assert 'Invalid user identifier' in 'You can change only your own date/time settings'
 +  where 'You can change only your own date/time settings' = <built-in method get of dict object at 0x000002F837C8E980>('message', '')
 +    where <built-in method get of dict object at 0x000002F837C8E980> = {'message': 'You can change only your own date/time settings'}.get
FAILED tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[Unauthorized role] - assert 401 == 403
 +  where 401 = <Response [401]>.status_code
FAILED tests/test_update_datetime_format_ddt.py::test_update_datetime_format_invalid_cases[User not found] - assert 403 == 400
 +  where 403 = <Response [403]>.status_code
======================== 8 failed, 26 passed in 6.61s =========================
